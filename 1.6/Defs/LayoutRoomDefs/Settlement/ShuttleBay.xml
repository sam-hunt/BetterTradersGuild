<?xml version="1.0" encoding="utf-8"?>
<Defs>
  <!--
    Better Traders Guild - Shuttle Bay

    Landing pad subroom with L-shaped walls (front + right side only), similar to
    CommandersQuarters bedroom. Placed in corners (preferred) or along edges with
    procedural wall completion. Uses VGE-enhanced prefab if VE Gravships mod is
    active, otherwise vanilla version.

    Generation sequence:
    1. Find best placement for landing pad (prefer corners, avoid walls with doors)
    2. Calculate and store landing pad area for validation (prevents other prefab overlap)
    3. Spawn landing pad prefab (10x10, VGE or vanilla version)
    4. Spawn required walls from PlacementCalculator (for edge/center placements)
    5. XML-defined prefabs spawn in remaining area (forklift, etc.)
    6. AncientSealedCrate markers connected to room edge with conduits
    7. Partial roofing applied (all cells roofed except landing pad area)

    noRoof=true tells layout system to skip roofing; worker handles it manually.
  -->

  <LayoutRoomDef>
    <defName>BTG_ShuttleBay</defName>
    <roomContentsWorkerType>BetterTradersGuild.RoomContents.ShuttleBay.RoomContents_ShuttleBay</roomContentsWorkerType>
    <dontPlaceRandomly>true</dontPlaceRandomly>
    <requiresSingleRectRoom>true</requiresSingleRectRoom>
    <noRoof>true</noRoof>
    <minSingleRectWidth>18</minSingleRectWidth>
    <minSingleRectHeight>15</minSingleRectHeight>

    <prefabs>
      <!-- Broken forklift for industrial atmosphere -->
      <AncientForklift>
        <countPerHundredCells>1</countPerHundredCells>
        <minMaxRange>0~1</minMaxRange>
      </AncientForklift>

      <IndustrialShelf_Edge>
        <countPerTenEdgeCells>6</countPerTenEdgeCells>
        <minMaxRange>6~8</minMaxRange>
      </IndustrialShelf_Edge>
    </prefabs>

    <parts>
      <!-- Hauling mechs - moves heavy cargo around the shuttle bay -->
      <BTG_Mech_Lifter MayRequire="Ludeon.RimWorld.Biotech">
        <countRange>1~2</countRange>
      </BTG_Mech_Lifter>
    </parts>

    <!--
      Override inherited wallAttachments from StructureLayoutDef.
      Spawn 4 LifeSupportUnits to ensure at least one lands outside the unroofed
      landing pad subroom. RoomContents worker prunes to keep only 1 valid unit.
    -->
    <wallAttachments>
      <LifeSupportUnit>
        <countRange>4~4</countRange>
      </LifeSupportUnit>
    </wallAttachments>
  </LayoutRoomDef>
</Defs>