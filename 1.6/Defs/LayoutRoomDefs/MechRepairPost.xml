<?xml version="1.0" encoding="utf-8"?>
<Defs>
  <!--
    Better Traders Guild - Mech Repair Post (Biotech DLC)

    Mechanoid maintenance and repair facility for friendly station mechs.
    Houses rechargers, gestators, and band nodes.

    Note: This is distinct from MechSecurityPost which contains volatile
    Ancient gestator tanks that release hostile mechanoids.
  -->

  <LayoutRoomDef MayRequire="Ludeon.RimWorld.Biotech">
    <defName>BTG_MechRepairPost</defName>
    <minSingleRectWidth>8</minSingleRectWidth>
    <minSingleRectHeight>8</minSingleRectHeight>
    <roomContentsWorkerType>BetterTradersGuild.RoomContents.MechRepairPost.RoomContents_MechRepairPost</roomContentsWorkerType>

    <edgeTerrain>MetalTile</edgeTerrain>
    <floorTypes>
      <li>Concrete</li>
    </floorTypes>

    <prefabs>
      <!-- Mech rechargers along walls (working, not Ancient) -->
      <BTG_BasicRecharger_Edge>
        <countPerTenEdgeCells>2</countPerTenEdgeCells>
        <minMaxRange>2~6</minMaxRange>
      </BTG_BasicRecharger_Edge>

      <!-- Large rechargers along walls (working, not Ancient) -->
      <BTG_StandardRecharger_Edge>
        <countPerTenEdgeCells>1</countPerTenEdgeCells>
        <minMaxRange>1~2</minMaxRange>
      </BTG_StandardRecharger_Edge>

      <!-- Mech gestators for repairs/production (working, not Ancient) -->
      <BTG_MechGestator>
        <countPerHundredCells>1</countPerHundredCells>
        <minMaxRange>0~1</minMaxRange>
      </BTG_MechGestator>

      <!-- Non-edge back-to-back rechargers for center placement -->
      <BTG_BasicRecharger_BackToBack>
        <countPerHundredCells>1</countPerHundredCells>
        <minMaxRange>1~2</minMaxRange>
      </BTG_BasicRecharger_BackToBack>

      <!-- Band nodes for mech control (working, not Ancient) -->
      <BTG_BandNode_Cluster>
        <countPerHundredCells>3</countPerHundredCells>
        <minMaxRange>1~2</minMaxRange>
      </BTG_BandNode_Cluster>

      <!-- Parts and component storage -->
      <IndustrialShelf_Edge>
        <countPerTenEdgeCells>2</countPerTenEdgeCells>
        <minMaxRange>1~3</minMaxRange>
      </IndustrialShelf_Edge>

      <!-- Steel shelves with mech supplies (filled by RoomContents_MechRepairPost) -->
      <BTG_SteelShelf_Edge>
        <countPerTenEdgeCells>1</countPerTenEdgeCells>
        <minMaxRange>1~2</minMaxRange>
      </BTG_SteelShelf_Edge>
    </prefabs>

    <!-- Mechs guarding their own station -->
    <parts>
      <HunterDrone>0.3</HunterDrone>
      <WaspDrone>0.2</WaspDrone>
      <!-- Combat mechs stationed at repair post -->
      <BTG_Mech_Militor MayRequire="Ludeon.RimWorld.Biotech">
        <countRange>0~2</countRange>
      </BTG_Mech_Militor>
    </parts>
  </LayoutRoomDef>
</Defs>
