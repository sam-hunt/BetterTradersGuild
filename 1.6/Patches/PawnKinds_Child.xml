<?xml version="1.0" encoding="utf-8"?>
<!--
  Better Traders Guild - TradersGuild_Child Patches

  Adds vacuum protection for children (Biotech DLC).
-->
<Patch>

  <!-- Add gear health: 1~1 (100% health, base has no value defined) -->
  <Operation Class="PatchOperationAdd">
    <xpath>/Defs/PawnKindDef[defName="TradersGuild_Child"]</xpath>
    <value>
      <gearHealthRange>1~1</gearHealthRange>
    </value>
  </Operation>

  <!-- Add vacuum protection for children (helmet is same as adults) -->
  <Operation Class="PatchOperationAdd">
    <xpath>/Defs/PawnKindDef[defName="TradersGuild_Child"]</xpath>
    <value>
      <apparelRequired>
        <li MayRequire="Ludeon.RimWorld.Biotech">Apparel_VacsuitChildren</li>
        <li>Apparel_VacsuitHelmet</li>
        <li>Apparel_ShieldBelt</li>
      </apparelRequired>
    </value>
  </Operation>

  <!-- Biotech: Override xenotype chances (5% Hussar, 10% Genie, 30% Starjack) -->
  <Operation Class="PatchOperationAdd" MayRequire="Ludeon.RimWorld.Biotech">
    <xpath>/Defs/PawnKindDef[defName="TradersGuild_Child"]</xpath>
    <value>
      <xenotypeSet>
        <xenotypeChances>
          <Hussar MayRequire="Ludeon.RimWorld.Biotech">0.05</Hussar>
          <Genie MayRequire="Ludeon.RimWorld.Biotech">0.10</Genie>
          <Starjack MayRequire="Ludeon.RimWorld.Biotech,Ludeon.RimWorld.Odyssey">0.30</Starjack>
        </xenotypeChances>
      </xenotypeSet>
    </value>
  </Operation>

</Patch>
